(function(){"use strict";var e={2639:function(e,o,t){t.d(o,{N:function(){return n},ip:function(){return l}});const l="http://127.0.0.1",n="8000"},1779:function(e,o,t){var l=t(1373);const n=(0,l.Z)();o["Z"]=n},6628:function(e,o,t){var l=t(9242),n=t(3396);function a(e,o,t,l,a,r){const i=(0,n.up)("SideMenu"),s=(0,n.up)("el-aside"),u=(0,n.up)("router-view"),m=(0,n.up)("el-main"),d=(0,n.up)("el-container");return(0,n.wg)(),(0,n.j4)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(s,{width:"230px"},{default:(0,n.w5)((()=>[(0,n.Wm)(i)])),_:1}),(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u)])),_:1})])),_:1})}const r=(0,n._)("div",{class:"sidebar-logo"},[(0,n._)("a",{href:"https://live.bilibili.com/",target:"_blank"},[(0,n._)("img",{src:"https://www.bilibili.com/favicon.ico",alt:"logo"}),(0,n._)("h1",null,"BiliBili Monitor")])],-1),i=(0,n._)("span",null,"总览",-1),s=(0,n.Uk)("房间监控"),u=(0,n.Uk)("分区信息"),m=(0,n._)("span",null,"操作",-1),d=(0,n.Uk)(" 添加房间监控 "),c=(0,n.Uk)(" 添加分区 ");function f(e,o,t,l,a,f){const p=(0,n.up)("Monitor"),h=(0,n.up)("el-icon"),w=(0,n.up)("el-space"),A=(0,n.up)("router-link"),W=(0,n.up)("el-menu-item"),I=(0,n.up)("el-submenu"),g=(0,n.up)("Setting"),v=(0,n.up)("el-menu"),T=(0,n.up)("AddRoomComponent"),b=(0,n.up)("AddAreaComponent");return(0,n.wg)(),(0,n.iD)(n.HY,null,[r,(0,n.Wm)(v,{"default-openeds":["1"]},{default:(0,n.w5)((()=>[(0,n.Wm)(I,{index:"1"},{title:(0,n.w5)((()=>[(0,n.Wm)(w,{wrap:""},{default:(0,n.w5)((()=>[(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(p)])),_:1}),i])),_:1})])),default:(0,n.w5)((()=>[(0,n.Wm)(W,{index:"1-1"},{default:(0,n.w5)((()=>[(0,n.Wm)(A,{to:"/"},{default:(0,n.w5)((()=>[s])),_:1})])),_:1}),(0,n.Wm)(W,{index:"1-2"},{default:(0,n.w5)((()=>[(0,n.Wm)(A,{to:"/areainfo"},{default:(0,n.w5)((()=>[u])),_:1})])),_:1})])),_:1}),(0,n.Wm)(I,{index:"2"},{title:(0,n.w5)((()=>[(0,n.Wm)(w,{wwrap:""},{default:(0,n.w5)((()=>[(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(g)])),_:1}),m])),_:1})])),default:(0,n.w5)((()=>[(0,n.Wm)(W,{index:"2-1",onClick:o[0]||(o[0]=o=>e.onAddRoom())},{default:(0,n.w5)((()=>[d])),_:1}),(0,n.Wm)(W,{index:"2-2",onClick:o[1]||(o[1]=o=>e.onAddArea())},{default:(0,n.w5)((()=>[c])),_:1})])),_:1})])),_:1}),(0,n.Wm)(T),(0,n.Wm)(b)],64)}var p=t(1779);const h={class:"drawer-footer"},w=(0,n.Uk)("取消"),A=(0,n.Uk)("确定");function W(e,o,t,l,a,r){const i=(0,n.up)("el-input"),s=(0,n.up)("el-form-item"),u=(0,n.up)("el-col"),m=(0,n.up)("el-row"),d=(0,n.up)("el-switch"),c=(0,n.up)("el-time-picker"),f=(0,n.up)("el-form"),p=(0,n.up)("el-button"),W=(0,n.up)("el-button-group"),I=(0,n.up)("el-drawer");return(0,n.wg)(),(0,n.j4)(I,{modelValue:e.isShowAddRoom,"onUpdate:modelValue":o[21]||(o[21]=o=>e.isShowAddRoom=o),title:"添加房间",size:"40%",direction:"ltr"},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{model:e.roomInfo},{default:(0,n.w5)((()=>[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,{span:6},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{label:"房间ID","label-width":"60px"},{default:(0,n.w5)((()=>[(0,n.Wm)(i,{modelValue:e.roomInfo.roomID,"onUpdate:modelValue":o[0]||(o[0]=o=>e.roomInfo.roomID=o),autocomplete:"off",style:{width:"150px"}},null,8,["modelValue"])])),_:1})])),_:1}),(0,n.Wm)(u,{span:2}),(0,n.Wm)(u,{span:6},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{label:"主播名","label-width":"60px"},{default:(0,n.w5)((()=>[(0,n.Wm)(i,{modelValue:e.roomInfo.name,"onUpdate:modelValue":o[1]||(o[1]=o=>e.roomInfo.name=o),autocomplete:"off",style:{width:"150px"}},null,8,["modelValue"])])),_:1})])),_:1}),(0,n.Wm)(u,{span:2}),(0,n.Wm)(u,{span:6},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{label:"平台","label-width":"60px"},{default:(0,n.w5)((()=>[(0,n.Wm)(i,{modelValue:e.roomInfo.platform,"onUpdate:modelValue":o[2]||(o[2]=o=>e.roomInfo.platform=o),style:{width:"150px"}},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,{span:12},{default:(0,n.w5)((()=>[(0,n.Wm)(s,null,{default:(0,n.w5)((()=>[(0,n.Wm)(d,{modelValue:e.roomInfo.recordMode,"onUpdate:modelValue":o[3]||(o[3]=o=>e.roomInfo.recordMode=o),"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"24小时录制","inactive-text":"仅在设定时间录制"},null,8,["modelValue"])])),_:1})])),_:1}),(0,n.Wm)(u,{span:12},{default:(0,n.w5)((()=>[(0,n.Wm)(s,null,{default:(0,n.w5)((()=>[(0,n.Wm)(d,{modelValue:e.roomInfo.divideByTitle,"onUpdate:modelValue":o[4]||(o[4]=o=>e.roomInfo.divideByTitle=o),"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"当天录像按照标题分P","inactive-text":"当天录像不分P"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,{span:6},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{label:"录制开始时间","label-width":"120px"},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{modelValue:e.startTime,"onUpdate:modelValue":o[5]||(o[5]=o=>e.startTime=o),disabled:e.roomInfo.recordMode,size:"small",format:"HH:mm",style:{width:"100px"},onChange:o[6]||(o[6]=o=>e.getStartTime())},null,8,["modelValue","disabled"])])),_:1})])),_:1}),(0,n.Wm)(u,{span:4}),(0,n.Wm)(u,{span:8},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{label:"录制结束时间","label-width":"120px"},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{modelValue:e.endTime,"onUpdate:modelValue":o[7]||(o[7]=o=>e.endTime=o),disabled:e.roomInfo.recordMode,size:"small",format:"HH:mm",style:{width:"100px"},onChange:o[8]||(o[8]=o=>e.getEndTime())},null,8,["modelValue","disabled"])])),_:1})])),_:1})])),_:1}),(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,{span:12},{default:(0,n.w5)((()=>[(0,n.Wm)(s,null,{default:(0,n.w5)((()=>[(0,n.Wm)(d,{modelValue:e.roomInfo.autoRecord,"onUpdate:modelValue":o[9]||(o[9]=o=>e.roomInfo.autoRecord=o),"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"自动录制","inactive-text":"仅监控"},null,8,["modelValue"])])),_:1})])),_:1}),(0,n.Wm)(u,{span:12},{default:(0,n.w5)((()=>[(0,n.Wm)(s,null,{default:(0,n.w5)((()=>[(0,n.Wm)(d,{modelValue:e.roomInfo.autoUpload,"onUpdate:modelValue":o[10]||(o[10]=o=>e.roomInfo.autoUpload=o),disabled:"","active-color":"#13ce66","inactive-color":"#ff4949","active-text":"自动上传","inactive-text":"禁止上传"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,{span:12},{default:(0,n.w5)((()=>[(0,n.Wm)(s,null,{default:(0,n.w5)((()=>[(0,n.Wm)(d,{modelValue:e.roomInfo.needM4a,"onUpdate:modelValue":o[11]||(o[11]=o=>e.roomInfo.needM4a=o),"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"转码生成视频和音频","inactive-text":"仅生成视频"},null,8,["modelValue"])])),_:1})])),_:1}),(0,n.Wm)(u,{span:12},{default:(0,n.w5)((()=>[(0,n.Wm)(s,null,{default:(0,n.w5)((()=>[(0,n.Wm)(d,{modelValue:e.roomInfo.mp4Compress,"onUpdate:modelValue":o[12]||(o[12]=o=>e.roomInfo.mp4Compress=o),"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"视频质量压缩","inactive-text":"不压缩视频"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,{span:12},{default:(0,n.w5)((()=>[(0,n.Wm)(s,null,{default:(0,n.w5)((()=>[(0,n.Wm)(d,{modelValue:e.roomInfo.cleanUpRegular,"onUpdate:modelValue":o[13]||(o[13]=o=>e.roomInfo.cleanUpRegular=o),"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"定期清理录制内容","inactive-text":"不清理生成的文件"},null,8,["modelValue"])])),_:1})])),_:1}),(0,n.Wm)(u,{span:12},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{label:"文件保留时间","label-width":"100px"},{default:(0,n.w5)((()=>[(0,n.Wm)(i,{modelValue:e.roomInfo.saveDuration,"onUpdate:modelValue":o[14]||(o[14]=o=>e.roomInfo.saveDuration=o),disabled:!e.roomInfo.cleanUpRegular,style:{width:"100px"}},null,8,["modelValue","disabled"])])),_:1})])),_:1})])),_:1}),(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,{span:12},{default:(0,n.w5)((()=>[(0,n.Wm)(s,null,{default:(0,n.w5)((()=>[(0,n.Wm)(d,{modelValue:e.roomInfo.areaLock,"onUpdate:modelValue":o[15]||(o[15]=o=>e.roomInfo.areaLock=o),"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"只录制指定分区下的直播","inactive-text":"不限制直播分区"},null,8,["modelValue"])])),_:1})])),_:1}),(0,n.Wm)(u,{span:12},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{label:"指定的分区名","label-width":"100px"},{default:(0,n.w5)((()=>[(0,n.Wm)(i,{modelValue:e.roomInfo.areaLimit,"onUpdate:modelValue":o[16]||(o[16]=o=>e.roomInfo.areaLimit=o),disabled:!e.roomInfo.areaLock,style:{width:"220px"}},null,8,["modelValue","disabled"])])),_:1})])),_:1})])),_:1}),(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,{span:12},{default:(0,n.w5)((()=>[(0,n.Wm)(s,null,{default:(0,n.w5)((()=>[(0,n.Wm)(d,{modelValue:e.roomInfo.saveDanmu,"onUpdate:modelValue":o[17]||(o[17]=o=>e.roomInfo.saveDanmu=o),"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"录制弹幕","inactive-text":"不录制弹幕"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,{span:14},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{label:"Cookies","label-width":"40px"},{default:(0,n.w5)((()=>[(0,n.Wm)(i,{modelValue:e.roomInfo.cookies,"onUpdate:modelValue":o[18]||(o[18]=o=>e.roomInfo.cookies=o),autocomplete:"off",style:{width:"300px"}},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model"]),(0,n._)("div",h,[(0,n.Wm)(W,null,{default:(0,n.w5)((()=>[(0,n.Wm)(p,{icon:"el-icon-circle-close",onClick:o[19]||(o[19]=o=>e.isShowAddRoom=!1)},{default:(0,n.w5)((()=>[w])),_:1}),(0,n.Wm)(p,{icon:"el-icon-circle-check",type:"primary",onClick:o[20]||(o[20]=o=>e.onSubmit())},{default:(0,n.w5)((()=>[A])),_:1})])),_:1})])])),_:1},8,["modelValue"])}var I=t(2639),g=t(818),v=(0,n.aZ)({data(){let e={platform:"",roomID:"",recordMode:!0,startTime:"220000",endTime:"020000",autoRecord:!0,autoUpload:!1,needM4a:!0,mp4Compress:!0,divideByTitle:!0,cleanUpRegular:!0,saveDuration:"3d",areaLock:!1,areaLimit:"放松电台,聊天电台,萌宅领域",saveDanmu:!0,name:"",cookies:""};return{roomInfo:e,isShowAddRoom:!1,startTime:new Date,endTime:new Date}},mounted(){p.Z.on("changeAddRoomVisible",(e=>{this.isShowAddRoom=e})),p.Z.on("addMonitorRoom",(e=>{this.roomInfo.roomID=e.RoomID,this.roomInfo.platform=e.Platform,this.isShowAddRoom=!0}))},methods:{onSubmit(){fetch(`${I.ip}:${I.N}/roomhandle`,{method:"post",headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST, GET, OPTIONS, PUT, DELETE,UPDATE","Access-Control-Allow-Headers":"Access-Control-Allow-Methods, Access-Control-Allow-Headers, Origin,Accept, X-Requested-With, Content-Type, Access-Control-Request-Method, Access-Control-Request-Headers","Access-Control-Allow-Credentials":"true","Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({handle:"add",data:this.roomInfo})}).then((e=>e.json())).then((e=>{console.log(e);let o="",t="",l="";e["msg"]?(o="success",t="Success",l="Add success"):(o="error",t="Failed",l="Add failed"),(0,g.bM)({title:t,message:l,type:o}),this.isShowAddRoom=!1})).catch((e=>{console.log(e)}))},getStartTime(){let e=this.startTime.toTimeString().split(":");3==e?.length&&(e[2]="00"),this.roomInfo.startTime=e?.join("")},getEndTime(){let e=this.endTime.toTimeString().split(":");3==e?.length&&(e[2]="00"),this.roomInfo.endTime=e?.join("")}}}),T=t(89);const b=(0,T.Z)(v,[["render",W]]);var _=b;const C=(0,n.Uk)("取消"),U=(0,n.Uk)("提交");function S(e,o,t,l,a,r){const i=(0,n.up)("el-input"),s=(0,n.up)("el-form-item"),u=(0,n.up)("el-col"),m=(0,n.up)("el-row"),d=(0,n.up)("el-form"),c=(0,n.up)("el-button"),f=(0,n.up)("el-dialog");return(0,n.wg)(),(0,n.j4)(f,{modelValue:e.isShowAddArea,"onUpdate:modelValue":o[6]||(o[6]=o=>e.isShowAddArea=o),title:"添加分区"},{footer:(0,n.w5)((()=>[(0,n.Wm)(c,{onClick:o[4]||(o[4]=o=>e.isShowAddArea=!1)},{default:(0,n.w5)((()=>[C])),_:1}),(0,n.Wm)(c,{type:"primary",onClick:o[5]||(o[5]=o=>e.onSubmit())},{default:(0,n.w5)((()=>[U])),_:1})])),default:(0,n.w5)((()=>[(0,n.Wm)(d,{model:e.areaInfo},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{gutter:10},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{span:12},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{label:"平台"},{default:(0,n.w5)((()=>[(0,n.Wm)(i,{modelValue:e.areaInfo.platform,"onUpdate:modelValue":o[0]||(o[0]=o=>e.areaInfo.platform=o)},null,8,["modelValue"])])),_:1})])),_:1}),(0,n.Wm)(u,{span:12},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{label:"分区名"},{default:(0,n.w5)((()=>[(0,n.Wm)(i,{modelValue:e.areaInfo.areaName,"onUpdate:modelValue":o[1]||(o[1]=o=>e.areaInfo.areaName=o)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,n.Wm)(m,{gutter:10},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{span:12},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{label:"分区ID"},{default:(0,n.w5)((()=>[(0,n.Wm)(i,{modelValue:e.areaInfo.areaID,"onUpdate:modelValue":o[2]||(o[2]=o=>e.areaInfo.areaID=o)},null,8,["modelValue"])])),_:1})])),_:1}),(0,n.Wm)(u,{span:12},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{label:"父ID"},{default:(0,n.w5)((()=>[(0,n.Wm)(i,{modelValue:e.areaInfo.parentID,"onUpdate:modelValue":o[3]||(o[3]=o=>e.areaInfo.parentID=o)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])}var y=(0,n.aZ)({data(){let e=!1,o={areaName:"",areaID:"",parentID:"",platform:""};return{isShowAddArea:e,areaInfo:o}},mounted(){p.Z.on("showAddArea",(e=>{this.isShowAddArea=e}))},methods:{onSubmit(){fetch(`${I.ip}:${I.N}/areahandle`,{method:"post",headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST, GET, OPTIONS, PUT, DELETE,UPDATE","Access-Control-Allow-Headers":"Access-Control-Allow-Methods, Access-Control-Allow-Headers, Origin,Accept, X-Requested-With, Content-Type, Access-Control-Request-Method, Access-Control-Request-Headers","Access-Control-Allow-Credentials":"true","Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({handle:"add",data:this.areaInfo})}).then((e=>e.json())).then((e=>{console.log(e);let o="",t="",l="";e["msg"]?(o="success",t="Success",l="Add area success"):(o="error",t="Failed",l="Add area failed"),(0,g.bM)({title:t,message:l,type:o}),this.isShowAddArea=!1})).catch((e=>{console.log(e)}))}}});const R=(0,T.Z)(y,[["render",S]]);var V=R,D=(0,n.aZ)({name:"SideMenu",components:{AddRoomComponent:_,AddAreaComponent:V},methods:{onAddRoom(){p.Z.emit("changeAddRoomVisible",!0)},onAddArea(){p.Z.emit("showAddArea",!0)}}});const k=(0,T.Z)(D,[["render",f]]);var M=k,x=(0,n.aZ)({name:"App",components:{SideMenu:M},setup(){}});const E=(0,T.Z)(x,[["render",a]]);var O=E,P=t(50),L=e=>{e.use(g.ZP,{locale:P.Z})},N=t(2748),H=t(678),$=t(7139);const j=(0,n._)("div",{class:"card-header"},[(0,n._)("span",null,"总体信息")],-1),q=(0,n.Uk)("E"),z=(0,n.Uk)("R");function Z(e,o,t,l,a,r){const i=(0,n.up)("el-card"),s=(0,n.up)("el-col"),u=(0,n.up)("el-result"),m=(0,n.up)("el-row"),d=(0,n.up)("el-link"),c=(0,n.up)("el-table-column"),f=(0,n.up)("router-link"),p=(0,n.up)("el-tag"),h=(0,n.up)("el-button"),w=(0,n.up)("el-table"),A=(0,n.up)("RoomInfoComponent");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(m,{gutter:10},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{span:5},{default:(0,n.w5)((()=>[(0,n.Wm)(i,{class:"box-card"},{header:(0,n.w5)((()=>[j])),default:(0,n.w5)((()=>[(0,n._)("div",null,"下载量: "+(0,$.zw)(e.totalDownload),1),(0,n._)("div",null,"已录制文件数: "+(0,$.zw)(e.fileNum),1)])),_:1})])),_:1}),(0,n.Wm)(s,{xs:8,sm:6,md:4,lg:3,xl:1},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{icon:e.result},null,8,["icon"])])),_:1})])),_:1}),(0,n.Wm)(w,{"default-sort":{prop:"State",order:"descending"},data:e.roomTable},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{prop:"RoomID",label:"房间ID",sortable:""},{default:(0,n.w5)((o=>[(0,n.Wm)(d,{href:e.roomID2URL(o.row),type:"info",underline:!1},{default:(0,n.w5)((()=>[(0,n.Uk)((0,$.zw)(o.row.RoomID),1)])),_:2},1032,["href"])])),_:1}),(0,n.Wm)(c,{prop:"Uname",label:"主播"},{default:(0,n.w5)((e=>[(0,n.Wm)(f,{to:"/livestatistics/"+e.row.Uname},{default:(0,n.w5)((()=>[(0,n.Uk)((0,$.zw)(e.row.Uname),1)])),_:2},1032,["to"])])),_:1}),(0,n.Wm)(c,{prop:"Platform",label:"平台",filters:e.platformFilter,"filter-method":e.filterPlatform},null,8,["filters","filter-method"]),(0,n.Wm)(c,{prop:"AreaName",label:"分区",filters:e.areaFilter,"filter-method":e.filterArea},null,8,["filters","filter-method"]),(0,n.Wm)(c,{prop:"Title",label:"直播标题"}),(0,n.Wm)(c,{prop:"LiveStatus",label:"直播状态",sortable:""},{default:(0,n.w5)((o=>[(0,n.Wm)(p,{type:e.status2Type(o.row.LiveStatus)},{default:(0,n.w5)((()=>[(0,n.Uk)((0,$.zw)(e.status2Name(o.row.LiveStatus)),1)])),_:2},1032,["type"])])),_:1}),(0,n.Wm)(c,{prop:"LiveStartTime",label:"开播时间"}),(0,n.Wm)(c,{prop:"LiveTime",label:"直播时长"}),(0,n.Wm)(c,{prop:"RecordTime",label:"录制时长"}),(0,n.Wm)(c,{prop:"State",label:"录制状态",sortable:""},{default:(0,n.w5)((o=>[(0,n.Wm)(p,{type:e.state2Type(o.row.State)},{default:(0,n.w5)((()=>[(0,n.Uk)((0,$.zw)(e.state2Name(o.row.State)),1)])),_:2},1032,["type"])])),_:1}),(0,n.Wm)(c,{label:"操作",fixed:"right"},{default:(0,n.w5)((o=>[(0,n.Wm)(h,{link:"",type:"primary",size:"small",onClick:t=>e.onEdit(o.row)},{default:(0,n.w5)((()=>[q])),_:2},1032,["onClick"]),(0,n.Wm)(h,{link:"",type:"primary",size:"small",onClick:t=>e.refresh(o.row)},{default:(0,n.w5)((()=>[z])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,n.Wm)(A)],64)}var F=t(4870);function B(e){return 1==e||2==e?"":3==e||5==e||8==e?"success":4==e||7==e?"warning":"danger"}function G(e){switch(e){case 1:return"正在监听";case 2:return"等待重连";case 3:return"录制中";case 4:return"等待转码";case 5:return"转码中";case 6:return"转码结束";case 7:return"等待上传";case 8:return"上传中";case 9:return"上传结束";case 10:return"停止监听"}return"未知"}function X(e){switch(e){case 0:return"default";case 1:return"success";case 2:return"warning"}return"error"}function J(e){switch(e){case 0:return"未开播";case 1:return"直播中";case 2:return"录播中"}return"封禁中"}const Y=(0,n._)("i",{class:"el-icon-user"},null,-1),K=(0,n.Uk)(" 房间ID "),Q=(0,n._)("i",{class:"el-icon-mobile-phone"},null,-1),ee=(0,n.Uk)(" 主播 "),oe=(0,n._)("i",{class:"el-icon-location-outline"},null,-1),te=(0,n.Uk)(" 分区 "),le=(0,n._)("i",{class:"el-icon-tickets"},null,-1),ne=(0,n.Uk)(" 直播标题 "),ae=(0,n._)("i",{class:"el-icon-office-building"},null,-1),re=(0,n.Uk)(" 直播状态 "),ie=(0,n._)("i",{class:"el-icon-office-building"},null,-1),se=(0,n.Uk)(" 开播时间 "),ue=(0,n._)("i",{class:"el-icon-office-building"},null,-1),me=(0,n.Uk)(" 开播时长 "),de=(0,n._)("i",{class:"el-icon-office-building"},null,-1),ce=(0,n.Uk)(" 录制时长 "),fe=(0,n._)("i",{class:"el-icon-office-building"},null,-1),pe=(0,n.Uk)(" 转码时长 "),he=(0,n._)("i",{class:"el-icon-office-building"},null,-1),we=(0,n.Uk)(" 上传时长 "),Ae=(0,n._)("i",{class:"el-icon-office-building"},null,-1),We=(0,n.Uk)(" 当前状态 "),Ie=(0,n._)("i",{class:"el-icon-office-building"},null,-1),ge=(0,n.Uk)(" 占用空间 "),ve=(0,n.Uk)(" null "),Te=(0,n._)("span",null,"编辑房间信息",-1),be=(0,n.Uk)("删除 "),_e=(0,n.Uk)("取消 "),Ce=(0,n.Uk)("确定"),Ue=(0,n.Uk)("立即转码");function Se(e,o,t,l,a,r){const i=(0,n.up)("el-link"),s=(0,n.up)("el-descriptions-item"),u=(0,n.up)("el-tag"),m=(0,n.up)("el-descriptions"),d=(0,n.up)("el-divider"),c=(0,n.up)("el-switch"),f=(0,n.up)("el-form-item"),p=(0,n.up)("el-col"),h=(0,n.up)("el-row"),w=(0,n.up)("el-time-picker"),A=(0,n.up)("el-input"),W=(0,n.up)("el-form"),I=(0,n.up)("Delete"),g=(0,n.up)("el-icon"),v=(0,n.up)("el-button"),T=(0,n.up)("Close"),b=(0,n.up)("Check"),_=(0,n.up)("Promotion"),C=(0,n.up)("el-button-group"),U=(0,n.up)("el-drawer");return(0,n.wg)(),(0,n.j4)(U,{modelValue:e.isShowRoomInfo,"onUpdate:modelValue":o[19]||(o[19]=o=>e.isShowRoomInfo=o),title:"房间信息",size:"45%",onClose:o[20]||(o[20]=o=>e.onCancel())},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{class:"margin-top",column:2,data:e.roomInfo,border:""},{default:(0,n.w5)((()=>[(0,n.Wm)(s,null,{label:(0,n.w5)((()=>[Y,K])),default:(0,n.w5)((()=>[(0,n.Wm)(i,{type:e.status2Type(e.roomInfo.LiveStatus),href:e.roomID2URL(e.roomInfo)},{default:(0,n.w5)((()=>[(0,n.Uk)((0,$.zw)(e.roomInfo.RoomID),1)])),_:1},8,["type","href"])])),_:1}),(0,n.Wm)(s,null,{label:(0,n.w5)((()=>[Q,ee])),default:(0,n.w5)((()=>[(0,n.Uk)(" "+(0,$.zw)(e.roomInfo.Uname),1)])),_:1}),(0,n.Wm)(s,null,{label:(0,n.w5)((()=>[oe,te])),default:(0,n.w5)((()=>[(0,n.Uk)(" "+(0,$.zw)(e.roomInfo.AreaName),1)])),_:1}),(0,n.Wm)(s,null,{label:(0,n.w5)((()=>[le,ne])),default:(0,n.w5)((()=>[(0,n.Uk)(" "+(0,$.zw)(e.roomInfo.Title),1)])),_:1}),(0,n.Wm)(s,null,{label:(0,n.w5)((()=>[ae,re])),default:(0,n.w5)((()=>[(0,n.Wm)(u,{size:"small",type:e.status2Type(e.roomInfo.LiveStatus)},{default:(0,n.w5)((()=>[(0,n.Uk)((0,$.zw)(e.status2Name(e.roomInfo.LiveStatus)),1)])),_:1},8,["type"])])),_:1}),(0,n.Wm)(s,null,{label:(0,n.w5)((()=>[ie,se])),default:(0,n.w5)((()=>[(0,n.Uk)(" "+(0,$.zw)(e.roomInfo.LiveStartTime),1)])),_:1}),(0,n.Wm)(s,null,{label:(0,n.w5)((()=>[ue,me])),default:(0,n.w5)((()=>[(0,n.Uk)(" "+(0,$.zw)(e.roomInfo.LiveTime),1)])),_:1}),(0,n.Wm)(s,null,{label:(0,n.w5)((()=>[de,ce])),default:(0,n.w5)((()=>[(0,n.Uk)(" "+(0,$.zw)(e.roomInfo.RecordTime),1)])),_:1}),(0,n.Wm)(s,null,{label:(0,n.w5)((()=>[fe,pe])),default:(0,n.w5)((()=>[(0,n.Uk)(" "+(0,$.zw)(e.roomInfo.DecodeTime),1)])),_:1}),(0,n.Wm)(s,null,{label:(0,n.w5)((()=>[he,we])),default:(0,n.w5)((()=>[(0,n.Uk)(" "+(0,$.zw)(e.roomInfo.UploadTime),1)])),_:1}),(0,n.Wm)(s,null,{label:(0,n.w5)((()=>[Ae,We])),default:(0,n.w5)((()=>[(0,n.Wm)(u,{size:"small",type:e.state2Type(e.roomInfo.State)},{default:(0,n.w5)((()=>[(0,n.Uk)((0,$.zw)(e.state2Name(e.roomInfo.State)),1)])),_:1},8,["type"])])),_:1}),(0,n.Wm)(s,null,{label:(0,n.w5)((()=>[Ie,ge])),default:(0,n.w5)((()=>[ve])),_:1})])),_:1},8,["data"]),(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[Te])),_:1}),(0,n.Wm)(W,{model:e.roomInfo},{default:(0,n.w5)((()=>[(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(p,{span:12},{default:(0,n.w5)((()=>[(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c,{modelValue:e.roomInfo.RecordMode,"onUpdate:modelValue":o[0]||(o[0]=o=>e.roomInfo.RecordMode=o),"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"24小时录制","inactive-text":"仅在设定时间录制"},null,8,["modelValue"])])),_:1})])),_:1}),(0,n.Wm)(p,{span:12},{default:(0,n.w5)((()=>[(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c,{modelValue:e.roomInfo.DivideByTitle,"onUpdate:modelValue":o[1]||(o[1]=o=>e.roomInfo.DivideByTitle=o),"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"当天录像按照标题分P","inactive-text":"当天录像不分P"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(p,{span:12},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{label:"录制开始时间","label-width":"120px"},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{modelValue:e.starttime,"onUpdate:modelValue":o[2]||(o[2]=o=>e.starttime=o),disabled:e.roomInfo.RecordMode,format:"HH:mm",onChange:o[3]||(o[3]=o=>e.getStartTime()),size:"small",style:{width:"100px"}},null,8,["modelValue","disabled"])])),_:1})])),_:1}),(0,n.Wm)(p,{span:12},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{label:"录制结束时间","label-width":"120px"},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{modelValue:e.endtime,"onUpdate:modelValue":o[4]||(o[4]=o=>e.endtime=o),disabled:e.roomInfo.RecordMode,format:"HH:mm",onChange:o[5]||(o[5]=o=>e.getEndTime()),size:"small",style:{width:"100px"}},null,8,["modelValue","disabled"])])),_:1})])),_:1})])),_:1}),(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(p,{span:12},{default:(0,n.w5)((()=>[(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c,{modelValue:e.roomInfo.AutoRecord,"onUpdate:modelValue":o[6]||(o[6]=o=>e.roomInfo.AutoRecord=o),"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"自动录制","inactive-text":"仅监控"},null,8,["modelValue"])])),_:1})])),_:1}),(0,n.Wm)(p,{span:12},{default:(0,n.w5)((()=>[(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c,{modelValue:e.roomInfo.AutoUpload,"onUpdate:modelValue":o[7]||(o[7]=o=>e.roomInfo.AutoUpload=o),disabled:"","active-color":"#13ce66","inactive-color":"#ff4949","active-text":"自动上传","inactive-text":"禁止上传"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(p,{span:12},{default:(0,n.w5)((()=>[(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c,{modelValue:e.roomInfo.NeedM4a,"onUpdate:modelValue":o[8]||(o[8]=o=>e.roomInfo.NeedM4a=o),"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"转码生成视频和音频","inactive-text":"仅生成视频"},null,8,["modelValue"])])),_:1})])),_:1}),(0,n.Wm)(p,{span:12},{default:(0,n.w5)((()=>[(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c,{modelValue:e.roomInfo.Mp4Compress,"onUpdate:modelValue":o[9]||(o[9]=o=>e.roomInfo.Mp4Compress=o),"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"视频质量压缩","inactive-text":"不压缩视频"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(p,{span:12},{default:(0,n.w5)((()=>[(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c,{modelValue:e.roomInfo.CleanUpRegular,"onUpdate:modelValue":o[10]||(o[10]=o=>e.roomInfo.CleanUpRegular=o),"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"定期清理录制内容","inactive-text":"不清理生成的文件"},null,8,["modelValue"])])),_:1})])),_:1}),(0,n.Wm)(p,{span:12},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{label:"文件保留时间","label-width":"120px"},{default:(0,n.w5)((()=>[(0,n.Wm)(A,{modelValue:e.roomInfo.SaveDuration,"onUpdate:modelValue":o[11]||(o[11]=o=>e.roomInfo.SaveDuration=o),autocomplete:"off",disabled:!e.roomInfo.CleanUpRegular},null,8,["modelValue","disabled"])])),_:1})])),_:1})])),_:1}),(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(p,{span:12},{default:(0,n.w5)((()=>[(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c,{modelValue:e.roomInfo.AreaLock,"onUpdate:modelValue":o[12]||(o[12]=o=>e.roomInfo.AreaLock=o),"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"只录制指定分区下的直播","inactive-text":"不限制直播分区"},null,8,["modelValue"])])),_:1})])),_:1}),(0,n.Wm)(p,{span:12},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{label:"指定的分区名","label-width":"120px"},{default:(0,n.w5)((()=>[(0,n.Wm)(A,{modelValue:e.roomInfo.AreaLimit,"onUpdate:modelValue":o[13]||(o[13]=o=>e.roomInfo.AreaLimit=o),autocomplete:"off",disabled:!e.roomInfo.AreaLock},null,8,["modelValue","disabled"])])),_:1})])),_:1})])),_:1}),(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(p,{span:12},{default:(0,n.w5)((()=>[(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c,{modelValue:e.roomInfo.SaveDanmu,"onUpdate:modelValue":o[14]||(o[14]=o=>e.roomInfo.SaveDanmu=o),"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"录制弹幕","inactive-text":"不录制弹幕"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model"]),(0,n.Wm)(C,null,{default:(0,n.w5)((()=>[(0,n.Wm)(v,{type:"danger",onClick:o[15]||(o[15]=o=>e.onDelete())},{default:(0,n.w5)((()=>[(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[(0,n.Wm)(I)])),_:1}),be])),_:1}),(0,n.Wm)(v,{onClick:o[16]||(o[16]=o=>e.onCancel())},{default:(0,n.w5)((()=>[(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[(0,n.Wm)(T)])),_:1}),_e])),_:1}),(0,n.Wm)(v,{type:"primary",onClick:o[17]||(o[17]=o=>e.onSubmit())},{default:(0,n.w5)((()=>[(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[(0,n.Wm)(b)])),_:1}),Ce])),_:1}),(0,n.Wm)(v,{type:"primary",onClick:o[18]||(o[18]=o=>e.onDecode())},{default:(0,n.w5)((()=>[(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[(0,n.Wm)(_)])),_:1}),Ue])),_:1})])),_:1})])),_:1},8,["modelValue"])}var ye=(0,n.aZ)({data(){let e={RoomID:"",Platform:"",LiveStatus:0,State:0,RecordMode:!0};return{isShowRoomInfo:!1,roomInfo:e,status2Name:J,status2Type:X,state2Type:B,state2Name:G,starttime:new Date,endtime:new Date}},mounted(){const e=e=>{console.log(e),this.isShowRoomInfo=e};p.Z.on("changeRoomInfoVisible",e),p.Z.on("changeRoomInfo",(e=>{console.log(e),this.roomInfo=e,this.starttime=new Date(`2022T${this.roomInfo.StartTime?.substr(0,2)}:${this.roomInfo.StartTime?.substr(2,2)}:${this.roomInfo.StartTime?.substr(4,2)}`),this.endtime=new Date(`2022T${this.roomInfo.EndTime?.substr(0,2)}:${this.roomInfo.EndTime?.substr(2,2)}:${this.roomInfo.EndTime?.substr(4,2)}`)}))},methods:{roomID2URL(e){return"bilibili"==e.Platform?`https://live.bilibili.com/${e.RoomID}`:"douyin"==e.Platform?`https://live.douyin.com/${e.RoomID}`:"huya"==e.Platform?`https://www.huya.com/${e.RoomID}`:""},onDelete(){fetch(`${I.ip}:${I.N}/roomhandle`,{method:"post",headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST, GET, OPTIONS, PUT, DELETE,UPDATE","Access-Control-Allow-Headers":"Access-Control-Allow-Methods, Access-Control-Allow-Headers, Origin,Accept, X-Requested-With, Content-Type, Access-Control-Request-Method, Access-Control-Request-Headers","Access-Control-Allow-Credentials":"true","Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({handle:"delete",data:this.getSubmitInfo()})}).then((e=>e.json())).then((e=>{console.log(e);let o="",t="",l="";e["msg"]?(o="success",t="Success",l="Delete success"):(o="error",t="Failed",l="Delete failed"),(0,g.bM)({title:t,message:l,type:o}),this.isShowRoomInfo=!1})).catch((e=>{console.log(e)}))},onSubmit(){fetch(`${I.ip}:${this.roomInfo.port}/roomhandle`,{method:"post",headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST, GET, OPTIONS, PUT, DELETE,UPDATE","Access-Control-Allow-Headers":"Access-Control-Allow-Methods, Access-Control-Allow-Headers, Origin,Accept, X-Requested-With, Content-Type, Access-Control-Request-Method, Access-Control-Request-Headers","Access-Control-Allow-Credentials":"true","Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({handle:"edit",data:this.getSubmitInfo()})}).then((e=>e.json())).then((e=>{console.log(e);let o="",t="",l="";e["msg"]?(o="success",t="Success",l="Edit success"):(o="error",t="Failed",l="Edit failed"),(0,g.bM)({title:t,message:l,type:o}),this.isShowRoomInfo=!1})).catch((e=>{console.log(e)}))},onDecode(){fetch(`${I.ip}:${this.roomInfo.port}/decode`,{method:"post",headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST, GET, OPTIONS, PUT, DELETE,UPDATE","Access-Control-Allow-Headers":"Access-Control-Allow-Methods, Access-Control-Allow-Headers, Origin,Accept, X-Requested-With, Content-Type, Access-Control-Request-Method, Access-Control-Request-Headers","Access-Control-Allow-Credentials":"true","Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({roomID:this.roomInfo.RoomID})}).then((e=>e.json())).then((e=>{console.log(e);let o="",t="",l="";e["msg"]?(o="success",t="Success",l="Decode success"):(o="error",t="Failed",l="Decode failed"),(0,g.bM)({title:t,message:l,type:o}),this.isShowRoomInfo=!1})).catch((e=>{console.log(e)}))},onCancel(){this.isShowRoomInfo=!1,console.log(this.roomInfo.StartTime),console.log(this.roomInfo.EndTime)},getStartTime(){let e=this.starttime.toTimeString().split(":");3==e?.length&&(e[2]="00"),this.roomInfo.StartTime=e?.join("")},getEndTime(){let e=this.endtime.toTimeString().split(":");3==e?.length&&(e[2]="00"),this.roomInfo.EndTime=e?.join("")},getSubmitInfo(){return{platform:this.roomInfo.Platform,roomID:this.roomInfo.RoomID,recordMode:this.roomInfo.RecordMode,startTime:this.roomInfo.StartTime,endTime:this.roomInfo.EndTime,autoRecord:this.roomInfo.AutoRecord,autoUpload:this.roomInfo.AutoUpload,needM4a:this.roomInfo.NeedM4a,mp4Compress:this.roomInfo.Mp4Compress,divideByTitle:this.roomInfo.DivideByTitle,cleanUpRegular:this.roomInfo.CleanUpRegular,saveDuration:this.roomInfo.SaveDuration,areaLock:this.roomInfo.AreaLock,areaLimit:this.roomInfo.AreaLimit,saveDanmu:this.roomInfo.SaveDanmu,name:this.roomInfo.Name,cookies:this.roomInfo.Cookies}}}});const Re=(0,T.Z)(ye,[["render",Se]]);var Ve=Re,De=(0,n.aZ)({name:"RoomMonitor",setup(){},components:{RoomInfoComponent:Ve},data(){let e=[],o="success",t="",l=0,n=[{text:"抖音",value:"douyin"},{text:"虎牙",value:"huya"},{text:"哔哩哔哩",value:"bilibili"}],a=[],r=(0,F.iH)(!1),i=(0,F.iH)(e[0]);return{roomTable:e,result:o,totalDownload:t,fileNum:l,platformFilter:n,areaFilter:a,status2Name:J,status2Type:X,state2Type:B,state2Name:G,showRoomInfo:r,room:i}},mounted(){this.getRooms(),setInterval(this.getRooms,1e3),this.getInfos(),setInterval(this.getInfos,1e3)},methods:{filterPlatform(e,o){return o.Platform===e},filterArea(e,o){return o.AreaName===e},getRooms(){fetch(`${I.ip}:${I.N}/livestatus`,{method:"get",headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST, GET, OPTIONS, PUT, DELETE,UPDATE","Access-Control-Allow-Headers":"Access-Control-Allow-Methods, Access-Control-Allow-Headers, Origin,Accept, X-Requested-With, Content-Type, Access-Control-Request-Method, Access-Control-Request-Headers","Access-Control-Allow-Credentials":"true","Content-Type":"application/json; charset=utf-8"}}).then((e=>e.json())).then((e=>{let o=[],t=[],l=[];for(let n in e)if(e[n]["LiveStartTime2"]=e[n]["LiveStartTime"],e[n]["LiveStartTime"]=this.date2string(new Date(1e3*parseInt(e[n]["LiveStartTime2"]))),e[n].LiveTime=this.getTimeMiuns(e[n].LiveStartTime2,"0"),e[n].RecordTime=this.getTimeMiuns(e[n].RecordStartTime,e[n].RecordEndTime),e[n].DecodeTime=this.getTimeMiuns(e[n].DecodeStartTime,e[n].DecodeEndTime),e[n].UploadTime=this.getTimeMiuns(e[n].UploadStartTime,e[n].UploadEndTime),e[n].port=I.N,o.push(e[n]),-1===t.indexOf(e[n]["AreaName"])){t.push(e[n]["AreaName"]);let o={text:e[n]["AreaName"],value:e[n]["AreaName"]};l.push(o)}this.roomTable=o,this.result="success",this.areaFilter=l})).catch((e=>{console.log(e),this.result="error",console.log(this.result)}))},fetchInfo(e){fetch(`${I.ip}:${e}/livestatus`,{method:"get",headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST, GET, OPTIONS, PUT, DELETE,UPDATE","Access-Control-Allow-Headers":"Access-Control-Allow-Methods, Access-Control-Allow-Headers, Origin,Accept, X-Requested-With, Content-Type, Access-Control-Request-Method, Access-Control-Request-Headers, Access-Control-Allow-Origin","Access-Control-Allow-Credentials":"true","Content-Type":"application/json; charset=utf-8"}}).then((e=>e.json())).then((o=>{for(let t in o)o[t]["LiveStartTime2"]=o[t]["LiveStartTime"],o[t]["LiveStartTime"]=this.date2string(new Date(1e3*parseInt(o[t]["LiveStartTime2"]))),o[t].LiveTime=this.getTimeMiuns(o[t].LiveStartTime2,"0"),o[t].RecordTime=this.getTimeMiuns(o[t].RecordStartTime,o[t].RecordEndTime),o[t].DecodeTime=this.getTimeMiuns(o[t].DecodeStartTime,o[t].DecodeEndTime),o[t].UploadTime=this.getTimeMiuns(o[t].UploadStartTime,o[t].UploadEndTime),o[t].port=e,this.roomTable.push(o[t])})).catch((e=>{console.log(e),this.result="error",console.log(this.result)}))},getInfos(){fetch(`${I.ip}:${I.N}/basestatus`,{method:"get",headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST, GET, OPTIONS, PUT, DELETE,UPDATE","Access-Control-Allow-Headers":"Access-Control-Allow-Methods, Access-Control-Allow-Headers, Origin,Accept, X-Requested-With, Content-Type, Access-Control-Request-Method, Access-Control-Request-Headers","Access-Control-Allow-Credentials":"true","Content-Type":"application/json; charset=utf-8"}}).then((e=>e.json())).then((e=>{this.totalDownload=this.getReadableSizeString(e["totalDownload"]),this.fileNum=e["fileNum"]})).catch((e=>{console.log(e),this.result="error",console.log(this.result)}))},getReadableSizeString(e){var o=-1,t=[" K"," M"," G"," T","P","E","Z","Y"];do{e/=1024,o++}while(e>1024);return Math.max(e,.1).toFixed(1)+t[o]},stillTwo(e){return("0"+e).substr(-2)},date2string(e){return`${e.getFullYear()}-${this.stillTwo(e.getMonth()+1)}-${this.stillTwo(e.getDate())} ${this.stillTwo(e.getHours())}:${this.stillTwo(e.getMinutes())}:${this.stillTwo(e.getSeconds())}`},getTimeMiuns(e,o){let t=0;if(parseInt(e)<parseInt(o))t=parseInt(o)-parseInt(e);else if(parseInt(e)>0){let o=new Date,l=new Date(1e3*parseInt(e));t=o.getTime()-l.getTime()}t=Math.floor(t/1e3);let l=Math.floor(t/86400),n=Math.floor(t%86400/3600),a=Math.floor(t%86400%3600/60),r=t%60;return`${l}天 ${n}时 ${a}分 ${r} 秒`},onEdit(e){this.showRoomInfo=!0,this.room=e,console.log(e),p.Z.emit("changeRoomInfoVisible",this.showRoomInfo),p.Z.emit("changeRoomInfo",this.room)},refresh(e){console.log(e.Uname),fetch(`${I.ip}:${e.port}/refresh/${e.RoomID}`,{method:"get",headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST, GET, OPTIONS, PUT, DELETE,UPDATE","Access-Control-Allow-Headers":"Access-Control-Allow-Methods, Access-Control-Allow-Headers, Origin,Accept, X-Requested-With, Content-Type, Access-Control-Request-Method, Access-Control-Request-Headers","Access-Control-Allow-Credentials":"true","Content-Type":"application/json; charset=utf-8"}}).then((e=>e.json())).then((e=>{(0,g.bM)({title:"Refresh success",message:e["msg"],type:"success"})})).catch((e=>{console.log(e)}))},roomID2URL(e){return"bilibili"==e.Platform?`https://live.bilibili.com/${e.RoomID}`:"douyin"==e.Platform?`https://live.douyin.com/${e.RoomID}`:"huya"==e.Platform?`https://www.huya.com/${e.RoomID}`:""}}});const ke=(0,T.Z)(De,[["render",Z]]);var Me=ke;const xe=[{path:"/",name:"RoomMonitor",component:Me},{path:"/areainfo",name:"AreaInfo",component:()=>Promise.all([t.e(747),t.e(499)]).then(t.bind(t,6499))},{path:"/livestatistics/:anchor",name:"LiveStatistics",component:()=>t.e(477).then(t.bind(t,5477))},{path:"/livewatch",name:"LiveWatch",component:()=>Promise.all([t.e(747),t.e(799)]).then(t.bind(t,6799))}],Ee=(0,H.p7)({history:(0,H.PO)("/"),routes:xe});var Oe=Ee;const Pe=(0,l.ri)(O).use(Oe);L(Pe);for(const[Le,Ne]of Object.entries(N))Pe.component(Le,Ne);Pe.mount("#app")}},o={};function t(l){var n=o[l];if(void 0!==n)return n.exports;var a=o[l]={id:l,loaded:!1,exports:{}};return e[l].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}t.m=e,function(){var e=[];t.O=function(o,l,n,a){if(!l){var r=1/0;for(m=0;m<e.length;m++){l=e[m][0],n=e[m][1],a=e[m][2];for(var i=!0,s=0;s<l.length;s++)(!1&a||r>=a)&&Object.keys(t.O).every((function(e){return t.O[e](l[s])}))?l.splice(s--,1):(i=!1,a<r&&(r=a));if(i){e.splice(m--,1);var u=n();void 0!==u&&(o=u)}}return o}a=a||0;for(var m=e.length;m>0&&e[m-1][2]>a;m--)e[m]=e[m-1];e[m]=[l,n,a]}}(),function(){t.n=function(e){var o=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(o,{a:o}),o}}(),function(){t.d=function(e,o){for(var l in o)t.o(o,l)&&!t.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:o[l]})}}(),function(){t.f={},t.e=function(e){return Promise.all(Object.keys(t.f).reduce((function(o,l){return t.f[l](e,o),o}),[]))}}(),function(){t.u=function(e){return"js/"+e+"."+{477:"7df778fd",499:"ce16db34",747:"2e05192f",799:"f000d300"}[e]+".js"}}(),function(){t.miniCssF=function(e){return"css/"+e+".e8760b6d.css"}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)}}(),function(){var e={},o="bilibili-recording:";t.l=function(l,n,a,r){if(e[l])e[l].push(n);else{var i,s;if(void 0!==a)for(var u=document.getElementsByTagName("script"),m=0;m<u.length;m++){var d=u[m];if(d.getAttribute("src")==l||d.getAttribute("data-webpack")==o+a){i=d;break}}i||(s=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,t.nc&&i.setAttribute("nonce",t.nc),i.setAttribute("data-webpack",o+a),i.src=l),e[l]=[n];var c=function(o,t){i.onerror=i.onload=null,clearTimeout(f);var n=e[l];if(delete e[l],i.parentNode&&i.parentNode.removeChild(i),n&&n.forEach((function(e){return e(t)})),o)return o(t)},f=setTimeout(c.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=c.bind(null,i.onerror),i.onload=c.bind(null,i.onload),s&&document.head.appendChild(i)}}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){t.p="/"}(),function(){var e=function(e,o,t,l){var n=document.createElement("link");n.rel="stylesheet",n.type="text/css";var a=function(a){if(n.onerror=n.onload=null,"load"===a.type)t();else{var r=a&&("load"===a.type?"missing":a.type),i=a&&a.target&&a.target.href||o,s=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");s.code="CSS_CHUNK_LOAD_FAILED",s.type=r,s.request=i,n.parentNode.removeChild(n),l(s)}};return n.onerror=n.onload=a,n.href=o,document.head.appendChild(n),n},o=function(e,o){for(var t=document.getElementsByTagName("link"),l=0;l<t.length;l++){var n=t[l],a=n.getAttribute("data-href")||n.getAttribute("href");if("stylesheet"===n.rel&&(a===e||a===o))return n}var r=document.getElementsByTagName("style");for(l=0;l<r.length;l++){n=r[l],a=n.getAttribute("data-href");if(a===e||a===o)return n}},l=function(l){return new Promise((function(n,a){var r=t.miniCssF(l),i=t.p+r;if(o(r,i))return n();e(l,i,n,a)}))},n={143:0};t.f.miniCss=function(e,o){var t={499:1};n[e]?o.push(n[e]):0!==n[e]&&t[e]&&o.push(n[e]=l(e).then((function(){n[e]=0}),(function(o){throw delete n[e],o})))}}(),function(){var e={143:0};t.f.j=function(o,l){var n=t.o(e,o)?e[o]:void 0;if(0!==n)if(n)l.push(n[2]);else{var a=new Promise((function(t,l){n=e[o]=[t,l]}));l.push(n[2]=a);var r=t.p+t.u(o),i=new Error,s=function(l){if(t.o(e,o)&&(n=e[o],0!==n&&(e[o]=void 0),n)){var a=l&&("load"===l.type?"missing":l.type),r=l&&l.target&&l.target.src;i.message="Loading chunk "+o+" failed.\n("+a+": "+r+")",i.name="ChunkLoadError",i.type=a,i.request=r,n[1](i)}};t.l(r,s,"chunk-"+o,o)}},t.O.j=function(o){return 0===e[o]};var o=function(o,l){var n,a,r=l[0],i=l[1],s=l[2],u=0;if(r.some((function(o){return 0!==e[o]}))){for(n in i)t.o(i,n)&&(t.m[n]=i[n]);if(s)var m=s(t)}for(o&&o(l);u<r.length;u++)a=r[u],t.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return t.O(m)},l=self["webpackChunkbilibili_recording"]=self["webpackChunkbilibili_recording"]||[];l.forEach(o.bind(null,0)),l.push=o.bind(null,l.push.bind(l))}();var l=t.O(void 0,[998],(function(){return t(6628)}));l=t.O(l)})();
//# sourceMappingURL=app.3481e09e.js.map